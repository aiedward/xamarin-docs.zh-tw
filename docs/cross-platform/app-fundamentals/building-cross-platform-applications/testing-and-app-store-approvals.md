---
title: 第 6 部分 - 測試和 App Store 核准
description: 本檔說明如何在裝置上測試跨平臺應用程式、管理測試案例、自動化測試、執行單元測試，以及進行應用程式提交流程。
ms.prod: xamarin
ms.assetid: 46E0578A-7EB9-C105-ABB0-A043E501F36B
author: davidortinau
ms.author: daortin
ms.date: 03/23/2017
ms.openlocfilehash: 5bddbee99f068baea69d3bc7dc8bcb731c547a43
ms.sourcegitcommit: 4e399f6fa72993b9580d41b93050be935544ffaa
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2020
ms.locfileid: "91458013"
---
# <a name="part-6---testing-and-app-store-approvals"></a>第 6 部分 - 測試和 App Store 核准

## <a name="testing"></a>測試

許多應用程式 (甚至是 Android 應用程式，在某些存放區上) 必須在發佈核准程式之前將其傳遞;因此，測試是確保您的應用程式達到市場 (的關鍵，讓您的客戶可以) 。 測試可能需要許多形式，從開發人員層級的單元測試到管理各種硬體的 Beta 測試。

### <a name="test-on-all-platforms"></a>在所有平臺上測試

在 Windows phone、平板電腦和桌面裝置上的 .NET 支援，以及防止即時產生動態程式碼的 iOS 限制之間，會有些許的差異。 當您開發應用程式時，請規劃在多個平臺上測試程式碼，或排程在專案結束時重構和更新應用程式模型部分的時間。

使用模擬器/模擬器來測試多個版本的作業系統以及不同的裝置功能/設定，一律是很好的作法。

您也應該在許多不同的實體硬體裝置上進行測試。

#### <a name="devices-in-cloud"></a>雲端中的裝置

行動電話和平板電腦生態系統一直都在不斷成長，因此無法測試不斷增加的可用裝置數目。 為了解決這個問題，有許多服務都能讓您從遠端控制許多不同的裝置，以便在不需要直接投資大量硬體的情況下安裝及測試應用程式。

App Center 測試可讓您輕鬆地在數百部不同的裝置上測試 iOS 和 Android 應用程式。 如需詳細資訊，請參閱 [準備 xamarin. Android 應用](/appcenter/test-cloud/preparing-for-upload/xamarin-android-uitest) 程式和 [準備 xamarin iOS 應用程式](/appcenter/test-cloud/preparing-for-upload/xamarin-ios-uitest)。

### <a name="test-management"></a>測試管理

當您在組織中測試應用程式，或使用外部使用者來管理測試程式時，有兩個挑戰：

- **散發** -管理布建程式 (特別是針對 iOS 裝置) ，並將軟體的更新版本提供給測試人員。
- **意見** 反應–收集有關應用程式使用狀況的資訊，以及可能發生之任何錯誤的詳細資訊。

有許多服務可協助解決這些問題，方法是提供內建于應用程式的基礎結構來收集和報告使用方式和錯誤，同時簡化布建程式以協助註冊及管理測試人員及其裝置。

[Visual Studio App Center](/appcenter/) 提供這些問題的解決方案，提供測試版本散發、損毀報告，以及精密的應用程式使用方式資訊。

### <a name="test-automation"></a>測試自動化

Xamarin [UITest](/appcenter/test-cloud/preparing-for-upload/uitest) 可以用來建立可在本機執行或上傳至 [App Center 測試](/appcenter/test-cloud/)的自動化使用者介面測試腳本。

## <a name="unit-testing"></a>單元測試

### <a name="touchunit"></a>Touch.Unit

Xamarin 包含稱為 Touch 的單元測試架構，其遵循 JUnit/NUnit 樣式撰寫測試。

如需撰寫測試及執行觸控的詳細資訊，請參閱 [使用 Xamarin 的單元測試](~/ios/deploy-test/touch.unit.md) 檔。

### <a name="andrunit"></a>Andr。單位

適用于 Android 的開放原始碼（稱為 Andr）。 您可以從[github](https://github.com/spouliot/Andr.Unit)下載，並閱讀有關此工具的[ @spouliot blog](https://spouliot.wordpress.com/2011/10/30/andr-unit-joins-the-family/)。

## <a name="app-store-approvals"></a>App Store 核准

Apple 和 Microsoft 只會在其平臺上操作唯一的存放區： App Store 和 Marketplace。 鎖定其裝置，並執行嚴格的應用程式審查流程，以控制可供下載的應用程式品質。 Android 的開放本質表示有許多商店選項，範圍從 Google 的 Play （可廣泛使用且沒有審核程式）到 Amazon 的 Android Appstore 和硬體特定的工作，例如有更有限散發的 Samsung Apps，以及執行核准程式。

等待應用程式進行審核可能會造成極大的壓力-商務壓力通常表示應用程式會在「目標」啟動日期之前，針對錯誤的邊際部分進行核准。 程式本身最多可能需要兩周的時間，而不一定是透明的：對您應用程式的進度有有限的意見反應，直到它最後被拒絕或核准為止。 拒絕可能表示缺少商機的行銷視窗，特別是當它發生一次以上時，而且在您的原始發行日期和最終核准應用程式時，會有數周傳遞。

### <a name="be-prepared"></a>做好準備

第一個建議事項：事先規劃您的應用程式啟動，並為可能的拒絕和重新提交建立額度。 每個存放區都要求您在提交應用程式之前先建立帳戶-請儘早進行。
雖然 Google Play 的註冊只需要幾分鐘的時間，但如果您的應用程式是免費的，則如果您要銷售並需要提供銀行和稅務資訊，程式會更有其相關。 Apple 和 Microsoft 的流程比 Google 還多，可能需要一周或更久的時間才能核准您的帳戶，因此請將此時間列入您的上市計畫。

一旦您的帳戶獲得核准，您就可以開始提交應用程式。 提交應用程式的實際程式涵蓋于下列檔中：

- [發行至 Apple 的 iOS App Store](~/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store.md)
- [準備 Google Play 的應用程式](~/android/deploy-test/publishing/publishing-to-google-play/index.md)
- Windows 開發人員應造訪 [Windows 開發人員中心](https://developer.microsoft.com/windows/windows-apps) ，以閱讀提交其應用程式的相關資訊。

本節的其餘部分將討論您應考慮的事項，以確保您的應用程式獲得核准，而不需要任何解決異常。

### <a name="quality"></a>品質

這聽起來很明顯，但應用程式通常會遭到拒絕，因為它們不符合特定等級的品質：畢竟，這是策劃存放區在一開始就有核准流程的原因！

當機是拒絕的常見原因。 如果您的應用程式太容易損毀，就一定會被拒絕。 大部分的開發人員都不會在預期會損毀的情況下提交應用程式，但通常會發生這種情況。 提交應用程式之前，請先徹底測試您的應用程式，而不只是確保一切運作正常，而且您也可以處理常見的行動錯誤案例，例如網路問題和資源條件約束（例如，記憶體或儲存空間）。 使用模擬器和實體裝置進行測試-不論模擬器中執行的程式碼有多好，只有裝置可以示範應用程式的實際效能。 您可以視需要使用多個不同的裝置，並在您可以使用協力廠商服務來協助管理 Beta 散發和意見反應時，登錄測試人員測試人員的團隊。

所有的行動作業系統都會終止無法快速啟動的應用程式。 允許的時間長度會有所不同，但在一般的應用程式中，應該會在幾秒鐘內進行回應，並使用背景工作來執行任何需要較長時間的工作。 如果應用程式載入時間太長，或在一般情況下都沒有回應，將會遭到拒絕。 當背景發生某些狀況，或應用程式似乎已損毀，且再次遭到拒絕時，請一律提供使用者意見反應。

### <a name="check-your-edge-cases"></a>檢查您的邊緣案例

開發人員的常見陷阱無法解決邊緣案例，特別是需要重新設定其模擬器或裝置才能正確測試的情況。 可能很容易忘記，並非每個客戶都將「允許」您的應用程式存取其位置，因為開發人員在接受要求一次之後，一律不會再次出現提示。 在核准程式期間，系統會特別著重許可權和網路使用情形，這表示在這些區域中的短暫監督可能會導致拒絕。

下列清單是檢查可能已錯過之邊緣案例的良好起點：

- **客戶可以「拒絕」存取服務** （尤其是在 iOS 中）只有當使用者授與應用程式的許可權時，才會提供地理位置資訊等資料的存取權。 應用程式測試人員應該經常以初始狀態重新安裝應用程式，並不允許任何許可權要求，以確保應用程式的行為正確。 開啟和關閉許可權，以在客戶變更想法時確認正確的行為。
- **客戶在任何地方都** 不會假設應用程式只會用於開發的城市或國家/地區！ 適用于 GPS 座標、日期和時間值和貨幣的程式碼可能會受到客戶的位置和地區設定的影響。 所有平臺都提供模擬器，可讓您指定不同的位置和地區設定-使用它來測試其他半球中的位置，以及使用不同的文化特性格式化日期和貨幣的文化特性。 緯度和經度值可以是正數或負數、小數分隔符號可以是句號或逗點，而您可以透過多種方式來格式化日期-處理！
- **網路連線緩慢** –應用程式開發人員通常會在「理想的世界」中運作，這顯然是真實世界中的情況。 使用慢速網路連線來進行測試 (例如，不佳的3G 連線) 以及沒有網路存取權，是確保您不會送出錯誤的應用程式很重要。 核准程式一律會包含裝置處於飛機模式的測試，因此請確定您已自行測試過。
- **硬體差異** –請記得在您打算支援的最舊、最慢的硬體上進行測試。 有兩個層面可能會影響您的應用程式：效能可能會在較舊的裝置上無法使用，並支援相機、麥克風、GPS、陀螺儀或其他選用元件等硬體功能。 應用程式應該會在元件無法使用時正常地降級 (而不會損毀) 。

### <a name="guidelines-are-more-than-just-a-guide"></a>指導方針並不只是「指南」

Apple 是非常著名的，因為其平臺的其中一個主要優點是一致性 (，且發現可用性) 的增加。 Microsoft 在執行 [Fluent Design 系統](https://microsoft.com/design/fluent)的 Windows 應用程式中採用類似的方法。 這兩個平臺的核准程式都需要評估您的應用程式，以遵循相關的設計原理。

這並不表示不支援或不建議使用者介面創新，但是有一些您「不應該」的專案，否則您的應用程式將會遭到拒絕。

在 iOS 上，這包括誤用內建圖示，或以不一致的方式使用其他妥善建立的隱喻;例如，針對除了建立新內容以外的任何其他內容，使用「撰寫」圖示。

Windows 開發人員應該同樣小心;常見的錯誤是，根據 Microsoft 的指導方針，無法適當地支援硬體 [上一頁] 按鈕。

鼓勵您的設計人員閱讀並遵循每個平臺的設計指導方針。

### <a name="implementing-platform-specific-features"></a>執行平臺特定功能

在執行平臺特定的服務時，尤其是在 iOS 上，會有一些更嚴格的事情。 為了避免 Apple 自動拒絕，有一些規則可遵循下列 iOS 功能：

- 應用程式**內購買**–應用程式不得實行數位產品的外部付款機制，包括遊戲內貨幣、應用程式功能、雜誌訂閱等等。 iOS 應用程式必須使用 Apple 的 iTunes 型服務來進行這類功能。 有一個漏洞應用程式（例如 Kindle 讀取器）和一些以訂用帳戶為基礎的應用程式可讓您在其他地方購買附加至「帳戶」的內容，您接著可以透過應用程式存取該內容，但在此情況下，應用程式不能包含應用程式外購買程式的連結或參考 (或者，將會拒絕) 。
- **icloud 備份** -隨著 iCloud 的出現，Apple 的審核者會更嚴格地瞭解應用程式如何使用儲存體 (，以確保客戶的遠端備份體驗是愉快的) 。 浪費備份能力儲存空間的應用程式可能會遭到拒絕，因此請適當地使用快取資料夾，並遵循 Apple 的其他儲存體相關指導方針。
- **Newsstand** –報紙和雜誌應用程式非常適合 Apple 的 Newsstand，不過應用程式必須至少執行一個自動續約的訂用帳戶，並且支援要核准的背景下載。
- **地圖** –將重迭和其他功能新增至行動地圖會越來越普遍，但請注意，不要隱匿地圖的「點數」資訊 (例如 iOS5) 中的 Google 標誌，這樣做會導致拒絕。

### <a name="manage-your-metadata"></a>管理您的中繼資料

除了可能會導致應用程式被拒絕的明顯技術問題之外，提交的一些更微妙的部分可能會導致拒絕，尤其是在您隨應用程式提交以顯示于 App Store 或 Marketplace 中的中繼資料 (描述、關鍵字和行銷影像) 。

- **影像** –遵循平臺的應用程式圖示指導方針和儲存圖片。 請勿使用商標映射，我們看到應用程式被拒絕，因為它們的圖示是精選 iPhone 的繪圖！
- **商標** –避免使用您自己的商標。 應用程式描述中或甚至在 Apple App Store 的關鍵字中，已拒絕應用程式提及的商標。
- **描述** -請勿使用 ' Beta ' 這個字，或是以任何方式表示應用程式尚未準備好進行主要時間。 即使您的應用程式是跨平臺) ，也請勿提及其他行動平臺 (。 最重要的是，請確定應用程式確實符合您的指示。 如果您在描述中列出一堆功能，更清楚地說明如何使用這些功能，或者您會收到「應用程式描述中所述的功能未實行」拒絕。

在應用程式的中繼資料中，投入大量投入開發和測試。 應用程式會在中繼資料中拒絕次要 infringements，因此值得花時間取得正確的時間。

### <a name="app-stores-not-for-everyone"></a>應用程式商店：不適用於每個人

每個平臺上存放區的主要焦點在於取用者分佈，也就是盡可能觸及最多客戶的能力。 不過，並非所有應用程式都是以取用者為目標，因此在內部和外部網路的應用程式中，會有一個快速成長的基底，需要對員工、供應商或客戶提供有限的散發。 這些應用程式並不是「銷售」，且不需要核准，因為開發人員會控制散發給已關閉的使用者群組。
這種部署類型的支援會因平臺而異。

Android 在這方面提供最大的彈性：您可以直接從 URL 或電子郵件附件安裝應用程式， (只要裝置的設定允許) 。 這表示建立和散發內部企業應用程式或將應用程式發佈給特定客戶或供應商很簡單。

Apple 為在 iOS Developer Enterprise 方案中註冊的開發人員提供了內部部署選項，這會略過 App Store 核准程式，讓公司將內部應用程式散發給員工。
可惜的是，此授權無法滿足外部網路應用程式散發給其他已關閉客戶或供應商群組的需求。 [企業 (和臨機操作) 部署](~/ios/deploy-test/app-distribution/ipa-support.md)

### <a name="app-store-summary"></a>App Store 摘要

審核程式可能會很困難，但就像開發生命週期的其餘部分，您可以透過一些規劃和關注的詳細資料，協助確保成功。 這全都有幾個簡單的步驟：閱讀並瞭解您必須遵守的使用者介面指導方針，如果您要執行平臺特定功能，請遵循規則，並徹底測試 (然後測試一些) ，最後在提交之前確定您的應用程式中繼資料是否正確。

開發人員在 Google Play 上發行的最後一個建議字：缺少核准程式似乎會讓您的工作變得更容易，但您的客戶會比審核小組更嚴苛。 請遵循這些指導方針，但您的應用程式可能會遭到拒絕，否則就是您的客戶正在拒絕。