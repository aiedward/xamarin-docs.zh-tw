---
title: 第 6 部分 - 測試和 App Store 核准
description: 本檔說明如何在裝置上測試跨平臺應用程式、管理測試案例、自動化測試、執行單元測試，以及執行應用程式提交流程。
ms.prod: xamarin
ms.assetid: 46E0578A-7EB9-C105-ABB0-A043E501F36B
author: conceptdev
ms.author: crdun
ms.date: 03/23/2017
ms.openlocfilehash: bf6ea18c73226a620ce002797d2d2b04b48c7cc8
ms.sourcegitcommit: 76f930ce63b193ca3f7f85f768b031e59cb342ec
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/23/2019
ms.locfileid: "71198429"
---
# <a name="part-6---testing-and-app-store-approvals"></a>第 6 部分 - 測試和 App Store 核准

## <a name="testing"></a>測試

許多應用程式（甚至是 Android 應用程式，在某些商店上）都必須在發佈核准程式之前進行傳遞;因此，測試非常重要，可確保您的應用程式到達市場（讓您的客戶自行成功）。 測試可以採用許多形式，從開發人員層級的單元測試，到管理各種硬體的 Beta 測試。

### <a name="test-on-all-platforms"></a>在所有平臺上測試

.NET 在 Windows phone、平板電腦和桌面裝置上支援的功能，以及可防止動態程式碼即時產生的 iOS 限制，兩者之間有些微差異。 請規劃在開發時于多個平臺上測試程式碼，或在專案結束時，排程重構和更新應用程式模型元件的時間。

最好的作法是使用模擬器/模擬器來測試作業系統的多個版本，以及不同的裝置功能/設定。

您也應該盡可能地在不同的實體硬體裝置上進行測試。

#### <a name="devices-in-cloud"></a>雲端中的裝置

行動電話和平板電腦生態系統持續成長，讓您無法在不斷增加的可用裝置數目上進行測試。 為了解決這個問題，有一些服務可讓您從遠端控制許多不同的裝置，以便在不需要直接投資大量硬體的情況下，就能安裝和測試應用程式。

[App Center 測試](https://docs.microsoft.com/appcenter/test-cloud/preparing-for-upload/uitest)提供簡單的方法，在數百個不同的裝置上測試 IOS 和 Android 應用程式。

### <a name="test-management"></a>測試管理

在您的組織內測試應用程式，或使用外部使用者管理測試版程式時，有兩個挑戰：

- **散發**–管理布建程式（特別是針對 iOS 裝置），並將軟體的更新版本提供給測試人員。
- **意見**反應–收集有關應用程式使用方式的資訊，以及可能發生之任何錯誤的詳細資訊。

有一些服務可協助解決這些問題，方法是提供內建于應用程式的基礎結構，以收集和報告使用方式和錯誤，同時也簡化了提供流程以協助註冊和管理測試人員及其裝置.

[Visual Studio App Center](/appcenter/)提供這些問題的解決方案，提供測試版本散發、損毀報告，以及精密的應用程式使用資訊。

### <a name="test-automation"></a>測試自動化

Xamarin [UITest](https://docs.microsoft.com/appcenter/test-cloud/preparing-for-upload/uitest)可以用來建立可在本機執行或上傳至[App Center 測試](https://docs.microsoft.com/appcenter/test-cloud/)的自動化使用者介面測試腳本。

## <a name="unit-testing"></a>單元測試

### <a name="touchunit"></a>Touch. Unit

Xamarin 包含一個稱為 Touch 的單元測試架構，其遵循 JUnit/NUnit 樣式撰寫測試。

如需撰寫測試和執行觸控的詳細資訊，請參閱[使用 Xamarin 的單元測試](~/ios/deploy-test/touch.unit.md)檔。

### <a name="andrunit"></a>Andr.Unit

有一個適用于 Android 的開放原始碼，稱為 Andr。 您可以從[github](https://github.com/spouliot/Andr.Unit)下載，並閱讀有關此工具[ @spouliot的 blog](http://spouliot.wordpress.com/2011/10/30/andr-unit-joins-the-family/)。

## <a name="app-store-approvals"></a>App Store 核准

Apple 和 Microsoft 會在其平臺上操作唯一的存放區：分別是 App Store 和 Marketplace。 會鎖定其裝置，並執行嚴格的應用程式審查流程，以控制可供下載的應用程式品質。 Android 的開放性質表示有一些商店選項的範圍從 Google Play 起，此功能已廣泛提供，而且沒有審核程式，可供 Amazon 的 Android Appstore 和硬體特定的工作（例如，散發應用程式較有限制並實行核准流程。

等待應用程式的審查可能會造成極大的壓力-商業壓力通常代表應用程式在「目標」發行日期之前，會有極少的邊界來進行核准。 進程本身最多可能需要兩周的時間，而且不一定是透明的：對應用程式進度的意見反應會受到限制，直到最後遭到拒絕或核准為止。 拒絕可能表示缺少商機的行銷時段，特別是當它發生一次以上時，而在您的原始啟動日期和應用程式最終核准時，周間會傳遞。

### <a name="be-prepared"></a>準備就緒

第一個建議事項：事先規劃您的應用程式啟動，並針對可能的拒絕和重新提交進行補償。 在提交應用程式之前，每個存放區都需要您建立帳戶-請儘早執行此動作。
雖然 Google Play 的註冊只需要幾分鐘的時間，但如果您的應用程式是免費的，則如果您要銷售它們，並需要提供銀行和稅務資訊，則會有更多相關的流程。 Apple 和 Microsoft 的程式與 Google 的程式相比，這可能需要一周或更久的時間，才能讓您的帳戶獲得核准，因此請將此項納入您的上市計畫。

一旦您的帳戶已核准，您就可以開始提交應用程式。 下列檔涵蓋提交應用程式的實際流程：

- [發行至 Apple 的 iOS App Store](~/ios/deploy-test/app-distribution/app-store-distribution/publishing-to-the-app-store.md)
- [準備應用程式以進行 Google Play](~/android/deploy-test/publishing/publishing-to-google-play/index.md)
- Windows 開發人員應該造訪[Windows 開發人員中心](https://developer.microsoft.com/windows/windows-apps)，閱讀有關提交其應用程式的資訊。

本節的其餘部分將討論您應該考慮的事項，以確保您的應用程式在沒有任何延遲的情況下獲得核准。

### <a name="quality"></a>品質

這聽起來很明顯，但應用程式通常會遭到拒絕，因為它們不符合特定的品質等級：畢竟，這就是策劃商店在一開始就有核准流程的原因！

損毀是拒絕的常見原因。 如果您的應用程式損毀很容易，就一定會遭到拒絕。 大部分的開發人員都不會在預期的情況下提交其應用程式，而是會損毀。 先徹底測試您的應用程式，再將它提交給您，而不只是要確定所有專案都能運作，而且您也可以處理常見的行動錯誤案例，例如網路問題，以及記憶體或儲存空間之類的資源限制。 同時使用模擬器和實體裝置來進行測試-無論程式碼在模擬器中執行的程度如何，只有裝置可以展示應用程式的實際效能。 使用您可以找到的各種不同裝置，並登錄一小組測試測試人員（如果您可以-協力廠商服務有助於管理搶鮮版（Beta）散發和意見反應）。

所有行動作業系統都會終止無法快速啟動的應用程式。 允許的時間長度會有所不同，但在一般應用程式中，應該要以幾秒鐘的速度回應，並使用背景工作來執行任何需要較久的工作。 若應用程式載入時間太長，或在一般用途中沒有回應，將會遭到拒絕。 當背景發生問題時，一律提供使用者意見反應，或是應用程式似乎已當機，而且會再次遭到拒絕。

### <a name="check-your-edge-cases"></a>檢查您的 Edge 案例

開發人員的常見設陷無法解決邊緣案例，尤其是需要重新設定其模擬器或裝置才能正常測試的情況。 不是每位客戶都要「允許」您的應用程式存取其位置是很容易的事，因為開發人員一旦接受要求一次，就不會再次出現提示。 許可權和網路使用方式在核准程式期間特別 focussed，這表示在這些區域中的小型監督可能會導致拒絕。

下列清單是檢查可能錯過之 edge 案例的好起點：

- **客戶可能會「拒絕」存取服務**，特別是在 iOS 中，只有在使用者授與許可權給您的應用程式時，才會提供地理位置資訊之類的資料存取權。 應用程式測試人員應該經常以初始狀態重新安裝應用程式，而不允許任何許可權要求，以確保應用程式能適當地運作。 切換許可權開啟和關閉，以在客戶改變其想法時驗證正確的行為。
- **客戶在各地**–不假設應用程式只會用於其開發所在的城市或國家/地區！ 適用于 GPS 座標、日期和時間值和貨幣的程式碼，全都會受到客戶的位置和地區設定的影響。 所有平臺都提供可讓您指定不同位置和地區設定的模擬器-用來測試其他半球中的位置，以及以不同的方式格式化日期和貨幣的文化特性。 緯度和經度值可以是正數或負數，小數分隔符號可能是句點或逗號，而日期可以用多種方式來格式化-處理！
- **慢速網路**連線-應用程式開發人員通常會在「理想的世界」中運作，這顯然不是真實世界的情況。 使用慢速網路連線（例如，3G 連線不佳）以及沒有網路存取進行測試，是確保您不會出貨錯誤應用程式的關鍵。 核准程式一律會在飛機模式中包含裝置的測試，因此請確定您已針對自己進行測試。
- **硬體不同**–請記得在您打算支援的最舊、最慢的硬體上進行測試。 有兩個層面可能會影響您的應用程式：效能（可能無法在較舊的裝置上使用），以及支援的硬體功能，例如相機、麥克風、GPS、陀螺儀或其他選擇性元件。 當元件無法使用時，應用程式應該會正常地降級（而且不會損毀）。

### <a name="guidelines-are-more-than-just-a-guide"></a>方針不僅僅是「指南」

Apple 非常著名于遵循其人類介面指導方針，因為其平臺的其中一個關鍵優勢在於一致性（以及認知的可用性增加）。 Microsoft 採用了類似的方法，與執行[流暢設計系統](https://microsoft.com/design/fluent)的 Windows 應用程式搭配使用。 這兩種平臺的核准程式將牽涉到您的應用程式在遵循相關的設計原理時進行評估。

這不表示不支援或鼓勵使用者介面創新，但您只需要執行某些動作，否則您的應用程式將會遭到拒絕。

在 iOS 上，這包括誤用內建圖示，或以不一致的方式使用其他妥善建立的比喻;例如，針對除了建立新內容以外的任何專案使用 ' 撰寫 ' 圖示。

Windows 開發人員應該同樣小心;常見的錯誤是，根據 Microsoft 的指導方針，無法正確支援硬體 [上一頁] 按鈕。

鼓勵您的設計人員閱讀並遵循每個平臺的設計方針。

### <a name="implementing-platform-specific-features"></a>執行平臺特定功能

在執行平臺特定服務（特別是在 iOS 上）時，會有一些更嚴格的專案。 為避免 Apple 自動拒絕，有一些規則可遵循下列 iOS 功能：

- 應用程式**內購買**-應用程式不得為數字產品（包括遊戲中的貨幣、應用程式功能、雜誌訂用帳戶及其他許多）實行外部付款機制。 iOS 應用程式必須針對這類功能使用 Apple 的 iTunes 型服務。 漏洞應用程式（例如 Kindle 讀取器）和一些以訂用帳戶為基礎的應用程式可讓您在附加至「帳戶」的其他地方購買內容，然後您就可以透過應用程式來存取它，但在此情況下，應用程式不能包含連結或參考到應用程式外購買程式（或同樣地，將會遭到拒絕）。
- **icloud 備份**-隨著 iCloud 的問世，Apple 的審核者會更嚴格地瞭解應用程式如何使用儲存體（以確保客戶的遠端備份體驗很愉快）。 浪費備份能力儲存空間的應用程式可能會遭到拒絕，因此請適當地使用快取資料夾，並遵循 Apple 的其他儲存體相關指導方針。
- **Newsstand** –報紙和雜誌應用程式非常適合 Apple 的 Newsstand，不過應用程式必須執行至少一個自動續訂的訂用帳戶，並支援要核准的背景下載。
- **Maps** –將重迭和其他功能新增至行動地圖的情況逐漸普及，不過，請小心不要遮蔽地圖的「信用額度」資訊（例如 iOS5 中的 Google 標誌），這樣做會導致拒絕。

### <a name="manage-your-metadata"></a>管理您的中繼資料

除了可能導致應用程式遭到拒絕的明顯技術問題以外，您的提交還有一些較細微的部分可能會導致拒絕，特別是您所提供的中繼資料（描述、關鍵字和行銷影像）提交應用程式，以顯示在 App Store 或 Marketplace 中。

- **影像**–遵循應用程式圖示的平臺指導方針，並儲存圖片。 請勿使用商標影像，我們看到應用程式遭到拒絕，因為其圖示會提供 iPhone 的繪圖！
- **商標**-避免使用您自己以外的任何商標。 應用程式已拒絕應用程式描述中提及的商標，或甚至在 Apple App Store 的關鍵字中。
- **描述**-請勿使用「搶鮮版（Beta）」這個字，或以任何方式表示應用程式尚未準備好進行主要時間。 不要提及其他行動平臺（即使您的應用程式跨平臺）。 最重要的是，請確定應用程式確實符合您的指示。 如果您在描述中列出一堆功能，更清楚瞭解如何使用這些功能，或者您將會看到「應用程式描述中所述的功能未實行」拒絕。

將應用程式中繼資料的投入量放在開發和測試中。 應用程式會遭到拒絕以進行中繼資料中的次要 infringements，因此值得花時間取得正確的時機。

### <a name="app-stores-not-for-everyone"></a>應用程式存放區：並非所有人

每個平臺上的商店主要重點是取用者散發-能夠盡可能觸及許多客戶。 不過，並非所有應用程式都是以取用者為目標，因此會有快速成長的內部和外部網路應用程式的基底，需要有限的散發給員工、供應商或客戶。 這些應用程式不會「銷售」，也不需要核准，因為開發人員會控制散發給已關閉的使用者群組。
這種部署類型的支援會因平臺而異。

Android 在此方面提供最大的彈性：您可以直接從 URL 或電子郵件附件安裝應用程式（只要裝置的設定允許的話）。 這表示建立和散發內部企業應用程式，或將應用程式發佈給特定的客戶或供應商是很簡單的。

Apple 提供內部部署選項給在 iOS 開發人員企業計畫中註冊的開發人員，這會略過 App Store 核准程式，並允許公司將內部應用程式散發給其員工。
不幸的是，此授權並不是為了滿足外部網路應用程式對其他已關閉的客戶或供應商群組的需求。 [企業（和特定）部署](~/ios/deploy-test/app-distribution/ipa-support.md)

### <a name="app-store-summary"></a>App Store 摘要

審核程式可能很困難，但如同開發生命週期的其餘部分，您可以透過一些規劃和重點來協助確保成功。 這全都是幾個簡單的步驟：閱讀並瞭解您必須遵守的使用者介面方針，如果您要執行平臺特定功能，請遵循這些規則，並徹底測試（然後再測試一些），最後確保您的應用程式中繼資料在提交之前是正確的。

開發人員在 Google Play 上發佈的最後一份建議：缺乏核准的程式可能會讓您的工作變得更簡單，但您的客戶會比審查團隊更嚴格。 請遵循這些指導方針，因為您的應用程式可能會遭到拒絕，否則就會是您的客戶進行拒絕。
