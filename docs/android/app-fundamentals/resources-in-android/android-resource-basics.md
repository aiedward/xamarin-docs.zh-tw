---
title: Android 資源基本概念
ms.prod: xamarin
ms.assetid: ED32E7B5-D552-284B-6385-C3EDDCC30A4B
ms.technology: xamarin-android
author: davidortinau
ms.author: daortin
ms.date: 02/01/2018
ms.openlocfilehash: ac228e6f0c251ae6f0fcabe1be855c6ed4a85d35
ms.sourcegitcommit: 2fbe4932a319af4ebc829f65eb1fb1816ba305d3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/29/2019
ms.locfileid: "73025352"
---
# <a name="android-resource-basics"></a>Android 資源基本概念

Almost all Android applications will have some sort of resources in them; at a minimum they often have the user interface layouts in the form of XML files. When a Xamarin.Android application is first created, default resources are setup by the Xamarin.Android project template:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![資源檔](android-resource-basics-images/01-resource-files-vs.png)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio for Mac](#tab/macos)

![資源檔](android-resource-basics-images/01-resource-files-xs.png)

-----

The five files that make up the default resources were created in the Resources folder:

- **Icon.png** &ndash; The default icon for the application

- **Main.axml** &ndash; The default user interface layout file for an application. Note that while Android uses the **.xml** file extension, Xamarin.Android uses the **.axml** file extension.

- **Strings.xml** &ndash; A string table to help with localization of  the application

- **AboutResources.txt** &ndash; This is not necessary and may safely be deleted. It just provides a high level overview of the Resources folder and the files in it.

- **Resource.designer.cs** &ndash; This file is automatically generated and maintained by Xamarin.Android and holds the unique ID's assigned to each resource. This is very similar and identical in purpose to the R.java file that an Android application written in Java would have. It is automatically created by the Xamarin.Android tools and will be regenerated from time to time.

## <a name="creating-and-accessing-resources"></a>Creating and Accessing Resources

Creating resources is as simple as adding files to the directory for the resource type in question. The screen shot below shows string resources for German locales were added to a project. When **Strings.xml** was added to the file, the **Build Action** was automatically set to **AndroidResource** by the Xamarin.Android tools:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

![Build action for Strings.xml set to AndroidResource](android-resource-basics-images/02-build-action-vs.png)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio for Mac](#tab/macos)

![Build action for Strings.xml set to AndroidResource](android-resource-basics-images/02-build-action-xs.png)

-----

這可讓您在 APK 檔案中正確編譯和內嵌資源。 若因為某些原因而無法將**組建動作**設定為**Android 資源**，則會從 APK 中排除這些檔案，而任何嘗試載入或存取資源的動作都會導致執行階段錯誤，且應用程式會損毀。

此外，請務必注意，雖然 Android 僅支援資源專案的小寫檔案名，但 Xamarin 較容許。它將同時支援大寫和小寫檔案名。 影像名稱的慣例是使用小寫加底線做為分隔符號（例如，我的 **\_影像\_名稱 .png**）。 請注意，如果使用破折號或空格做為分隔符號，就無法處理資源名稱。

將資源新增至專案之後，有兩種方式可以在應用程式中使用它們（在程式碼內）或 XML 檔案中的 &ndash;。

## <a name="referencing-resources-programmatically"></a>以程式設計方式參考資源

若要以程式設計方式存取這些檔案，系統會將唯一的資源識別碼指派給它們。 此資源識別碼是在名為 `Resource`的特殊類別中定義的整數，在檔案**Resource.designer.cs**中找到，並看起來像這樣：

```csharp
public partial class Resource
{
    public partial class Attribute
    {
    }
    public partial class Drawable {
        public const int Icon=0x7f020000;
    }
    public partial class Id
    {
        public const int Textview=0x7f050000;
    }
    public partial class Layout
    {
        public const int Main=0x7f030000;
    }
    public partial class String
    {
        public const int App_Name=0x7f040001;
        public const int Hello=0x7f040000;
    }
}
```

每個資源識別碼都包含在對應至資源類型的嵌套類別內。 例如，當檔案**圖示 .png**新增至專案時，Xamarin 會更新 `Resource` 類別，並建立名為 `Drawable` 的嵌套類別，並在名為 `Icon`內具有常數。
如此一來，程式碼中的檔案**圖示 .png**就會被視為 `Resource.Drawable.Icon`。 `Resource` 類別不應手動編輯，因為對其所做的任何變更將會被 Xamarin 覆寫。

以程式設計方式參考資源時（在程式碼中），可以透過使用下列語法的 Resources 類別階層來存取它們：

```csharp
[<PackageName>.]Resource.<ResourceType>.<ResourceName>
```

- **PackageName** &ndash; 提供資源的封裝，而且只有在使用來自其他封裝的資源時才需要。

- **ResourceType** &ndash; 這是上面所述資源類別內的嵌套資源類型。

- **資源名稱**&ndash; 這是在 XML 專案中，資源的檔案名（不含副檔名）或 android： Name 屬性的值。

## <a name="referencing-resources-from-xml"></a>從 XML 參考資源

XML 檔案中的資源是由下列特殊語法存取：

```xml
@[<PackageName>:]<ResourceType>/<ResourceName>
```

- **PackageName** &ndash; 提供資源的封裝，而且只有在使用來自其他封裝的資源時才需要。

- **ResourceType** &ndash; 這是資源類別內的嵌套資源類型。

- **資源名稱**&ndash; 這是資源的檔案名（*不含*檔案類型副檔名）或 XML 元素中資源的 `android:name` 屬性值。

例如，版面配置檔案**axml**的內容如下所示：

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <ImageView android:id="@+id/myImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/flag" />
</LinearLayout>
```

這個範例有一個[`ImageView`](https://github.com/xamarin/recipes/tree/master/Recipes/android/controls/imageview) ，需要名為**旗**標的可繪製資源。 `ImageView` 將其 `src` 屬性設定為 [`@drawable/flag`]。 當活動開始時，Android 會在目錄**資源/可繪製**檔案中查看名為 [**旗標 .png** ] 的檔案（副檔名可以是另一種影像格式，例如 [旗標 **.jpg**]）並載入該檔案，並將它顯示在 `ImageView`中。
執行此應用程式時，它看起來會像下圖：

![當地語系化的 ImageView](android-resource-basics-images/03-localized-screenshot.png)
